---
title: "Project2"
author: "Spencer Muncey and Chenchao Zang"
date: "October 2, 2015"
output: html_document
---
# Health Insurance and Hours Worked By Wives
This data set was referenced in a September 1998 article written by Craig Olson in the *Journal of Applied Econometrics*. The data was used to determine the validity of the hypothesis that wifes who don't have health insurance through their husbands employer are more likely to work full time to get health insurance than wifes who are covered by their husbands health insurance. 

Here is the article in its entirety if you would like to read it: [1998 Olson Journal of Applied Econometrics](./Olson-1998-Journal_of_Applied_Econometrics.pdf)

## The data set 
The data set is from the March 1993 US Current Population Survey. Here is a summary of that data set:
```{r}
require("jsonlite")
require("RCurl")
# Change the USER and PASS below to be your UTEid
df <- data.frame(fromJSON(getURL(URLencode('129.152.144.84:5001/rest/native/?query="select * from hi"'),httpheader=c(DB='jdbc:oracle:thin:@129.152.144.84:1521/PDBF15DV.usuniversi01134.oraclecloud.internal', USER='cs329e_cz4795', PASS='orcl_cz4795', MODE='native_mode', MODEL='model', returnDimensions = 'False', returnFor = 'JSON'), verbose = TRUE), ))
summary(df)
```


Here is the first ten rows of that data set:
```{r tidy=TRUE}
head(df)
```

A detailed explanation of each column in the data set:  

* WHRSWK - Hours worked per week by wife
* HHI - Is the wife covered by the husbands health insurance? "yes", "no"
* WHI - Does the wife have health insurnace through her job? "yes", "no"
* HHI2 - Does the husband has health insurance through his own job? "yes", "no"
* education - Education level of the wife, "<9years", "9-11years", "12years", "13-15years", "16years", ">16years"
* race - Race of wife: "white", "black", "other"
* hispanic - Is the wife hispanic? "yes", "no"
* region - Region where wife and husband live: "other", "northcentral", "south", "west"
* experience - Years of husbands potential work experience
* kidslt6 - Number of kids under age of 6
* kids618 - Number of kids 6â€“18 years old
* husby - Husband's income in thousands of dollars

## Session Info
This is how my Rstudio is set up in order to execute the experiment and produce these results:
```{r}
sessionInfo()
```

### Plot 1: Influence of Education Level and Husbands Income on Number of Children
This plot looks at the relationship between hansbands income and number of kids based on the educaion level of wife.
``` {r}
source("../02 Data Wrangling/Project2_Plot1_df.r", echo = TRUE)
```

Data Wrangling R Workflow to produce the dataframe that powers this plot: 
```
Plot1_df <- df %>% group_by (EDUCATION, HUSBY) %>% summarise(mean_kids = mean(KIDSLT6 + KIDS618))
```
### Plot 2:Influence of Husband work experience and Husbands Income on wife insurance covered type at top 10 & bottom 10 percent of husbands work experience
This plot looks at the relationship between hansbands income and the Years of husbands potential work experience based on the wife covered by the husbands health insurance.
``` {r}
source("../02 Data Wrangling/Project2_Plot2_df.r", echo = TRUE)
```

Data Wrangling R Workflow to produce the dataframe that powers this plot: 
```
Plot2_df <- df %>% mutate(EXPERIENCE_PERCENT = cume_dist(EXPERIENCE)) %>% filter(EXPERIENCE_PERCENT  <= .1 | EXPERIENCE_PERCENT  >= .9)
```
### Plot 3: Influence of number of kids and no health insurance from husband on hours worked by wives
This plot looks at the relationship between hours worked by wives and number of kids selecting the wife without the insurance from husbands.
``` {r}
source("../02 Data Wrangling/Project2_Plot3_df.r", echo = TRUE)
```

Data Wrangling R Workflow to produce the dataframe that powers this plot: 
```
Plot3_df <- df %>% select(HHI, KIDSLT6, KIDS618, WHRSWK) %>% filter(HHI == "no") %>% mutate(TOTAL_KIDS = KIDSLT6 + KIDS618)
```
